'use strict';
var adler32, alldecoder, allenchashes, allencoder, base85, base91, caesar, cheerio, crc, crypto, decalgos, dechashes, decmd5, decrypter, encalgos, enchashes, hex_parse, recipro, request, rev, rot13, rot18, rot47, rot5,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

crc = require('crc');

crypto = require('crypto');

base85 = require('../lib/base85');

base91 = require('../lib/base91');

caesar = require('caesar-salad');

adler32 = require('adler-32');

cheerio = require('cheerio');

request = require('sync-request');

allencoder = [];

encalgos = ['hex', 'ascii', 'base64', 'ascii85', 'base91', 'rot5', 'rot13', 'rot18', 'rot47', 'rev', 'z85', 'rfc1924', 'crc1', 'crc8', 'crc16', 'crc24', 'crc32', 'adler32', 'url', 'unixtime'];

enchashes = ['md4', 'md5', 'sha', 'sha1', 'sha224', 'sha256', 'sha384', 'sha512', 'rmd160', 'whirlpool'];

allenchashes = enchashes.concat(crypto.getHashes());

allenchashes = allenchashes.filter(function(x, i, self) {
  return self.indexOf(x) === i;
});

allencoder = allencoder.concat(encalgos, allenchashes);

alldecoder = [];

decalgos = ['hex', 'ascii', 'base64', 'ascii85', 'base91', 'rot5', 'rot13', 'rot18', 'rot47', 'rev', 'z85', 'rfc1924', 'url', 'unixtime'];

dechashes = ['md5'];

alldecoder = alldecoder.concat(decalgos, dechashes);

hex_parse = function(str) {
  var hex;
  hex = str.replace(/0x|:/g, '');
  if (!(hex.length % 2)) {
    return hex;
  } else {
    return false;
  }
};

rot5 = function(str) {
  return caesar.ROT5.Cipher().crypt(str);
};

rot13 = function(str) {
  return caesar.ROT13.Cipher().crypt(str);
};

rot18 = function(str) {
  return caesar.ROT18.Cipher().crypt(str);
};

rot47 = function(str) {
  return caesar.ROT47.Cipher().crypt(str);
};

rev = function(str) {
  return str.split('').reverse().join('');
};

recipro = {
  rot5: rot5,
  rot13: rot13,
  rot18: rot18,
  rot47: rot47,
  rev: rev
};

decmd5 = function(str) {
  var $, baseUrl, error, res, ret_str;
  baseUrl = 'http://www.md5-hash.com/md5-hashing-decrypt/';
  try {
    res = request('GET', baseUrl + str);
  } catch (_error) {
    error = _error;
    return error;
  }
  $ = cheerio.load(res.getBody('utf8'));
  ret_str = $('strong.result').text();
  if (str === encoder(ret_str, 'md5')) {
    return ret_str;
  } else {
    return 'not found';
  }
};

decrypter = {
  md5: decmd5
};

module.exports.encoder = function(str, algo) {
  var hex;
  switch (algo) {
    case 'hex':
    case 'base64':
      return new Buffer(str).toString(algo);
    case 'ascii85':
      return base85.encode(str, 'ascii85');
    case 'base91':
      if (hex = hex_parse(str)) {
        return base91.encode(Buffer(hex, 'hex')).toString('utf8');
      }
      break;
    case 'ascii':
      if (hex = hex_parse(str)) {
        return Buffer(hex, 'hex').toString('utf8');
      }
      break;
    case 'rot5':
    case 'rot13':
    case 'rot18':
    case 'rot47':
    case 'rev':
      return recipro[algo](str);
    case 'z85':
      return base85.encode(str, 'z85');
    case 'rfc1924':
      return base85.encode(str, 'ipv6');
    case 'crc1':
    case 'crc8':
    case 'crc16':
    case 'crc24':
    case 'crc32':
      return crc[algo](str).toString(16);
    case 'adler32':
      return adler32.str(str).toString(16);
    case 'url':
      return encodeURIComponent(str);
    case 'unixtime':
      return Date.parse(str).toString(10);
    default:
      if (indexOf.call(allenchashes, algo) >= 0) {
        return crypto.createHash(algo).update(str, 'utf8').digest('hex');
      }
  }
};

module.exports.decoder = function(str, algo) {
  switch (algo) {
    case 'hex':
      if (!(str.length % 2)) {
        return new Buffer(str, algo).toString('utf8');
      }
      break;
    case 'base64':
      return new Buffer(str, algo).toString('utf8');
    case 'ascii85':
      return base85.decode(str, 'ascii85').toString('utf8');
    case 'base91':
      return base91.decode(str).toString('hex');
    case 'ascii':
      return new Buffer(str, algo).toString('hex');
    case 'rot5':
    case 'rot13':
    case 'rot18':
    case 'rot47':
    case 'rev':
      return recipro[algo](str);
    case 'z85':
      return base85.decode(str, 'z85').toString('utf8');
    case 'rfc1924':
      return base85.decode(str, 'ipv6').toString('utf8');
    case 'url':
      return decodeURIComponent(str);
    case 'unixtime':
      return new Date(parseInt(str)).toString('utf8');
    case 'md5':
      return decrypter[algo](str);
    default:
      return 'not implemented';
  }
};

//# sourceMappingURL=data:application/json;base64,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dUI7QUFBQSxDQWpIekIsQ0FBQSIsImZpbGUiOiJzdHJpbmctY29kZWMuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuY3JjID0gcmVxdWlyZSAnY3JjJ1xuY3J5cHRvID0gcmVxdWlyZSAnY3J5cHRvJ1xuYmFzZTg1ID0gcmVxdWlyZSAnLi4vbGliL2Jhc2U4NSdcbmJhc2U5MSA9IHJlcXVpcmUgJy4uL2xpYi9iYXNlOTEnXG5jYWVzYXIgPSByZXF1aXJlICdjYWVzYXItc2FsYWQnXG5hZGxlcjMyID0gcmVxdWlyZSAnYWRsZXItMzInXG5jaGVlcmlvID0gcmVxdWlyZSAnY2hlZXJpbydcbnJlcXVlc3QgPSByZXF1aXJlICdzeW5jLXJlcXVlc3QnXG5cbmFsbGVuY29kZXIgPSBbXVxuZW5jYWxnb3MgPSBbJ2hleCcsICdhc2NpaScsICdiYXNlNjQnLCAnYXNjaWk4NScsICdiYXNlOTEnLCAncm90NScsICdyb3QxMycsXG4gICAgICAgICAgICAncm90MTgnLCAncm90NDcnLCAncmV2JywgJ3o4NScsICdyZmMxOTI0JywgJ2NyYzEnLCAnY3JjOCcsICdjcmMxNicsXG4gICAgICAgICAgICAnY3JjMjQnLCAnY3JjMzInLCAnYWRsZXIzMicsICd1cmwnLCAndW5peHRpbWUnXVxuZW5jaGFzaGVzID0gWydtZDQnLCAnbWQ1JywgJ3NoYScsICdzaGExJywgJ3NoYTIyNCcsICdzaGEyNTYnLCAnc2hhMzg0JyxcbiAgICAgICAgICAgICAnc2hhNTEyJywgJ3JtZDE2MCcsICd3aGlybHBvb2wnXVxuYWxsZW5jaGFzaGVzID0gZW5jaGFzaGVzLmNvbmNhdChjcnlwdG8uZ2V0SGFzaGVzKCkpXG4jIGRlZHVwZVxuYWxsZW5jaGFzaGVzID0gYWxsZW5jaGFzaGVzLmZpbHRlcigoeCwgaSwgc2VsZikgLT4gc2VsZi5pbmRleE9mKHgpIGlzIGkpXG5hbGxlbmNvZGVyID0gYWxsZW5jb2Rlci5jb25jYXQoZW5jYWxnb3MsYWxsZW5jaGFzaGVzKVxuXG5hbGxkZWNvZGVyID0gW11cbmRlY2FsZ29zID0gWydoZXgnLCAnYXNjaWknLCAnYmFzZTY0JywgJ2FzY2lpODUnLCAnYmFzZTkxJywgJ3JvdDUnLCAncm90MTMnLFxuICAgICAgICAgICAgJ3JvdDE4JywgJ3JvdDQ3JywgJ3JldicsICd6ODUnLCAncmZjMTkyNCcsICd1cmwnLCAndW5peHRpbWUnXVxuZGVjaGFzaGVzID0gWydtZDUnXVxuYWxsZGVjb2RlciA9IGFsbGRlY29kZXIuY29uY2F0KGRlY2FsZ29zLGRlY2hhc2hlcylcblxuIyBoZXggcGFyc2UgaGVscGVyXG5oZXhfcGFyc2UgPSAoc3RyKSAtPlxuICBoZXggPSBzdHIucmVwbGFjZSgvMHh8Oi9nLCAnJylcbiAgaWYgbm90IChoZXgubGVuZ3RoICUgMilcbiAgICBoZXhcbiAgZWxzZVxuICAgIGZhbHNlXG5cbnJvdDUgPSAoc3RyKSAtPlxuICBjYWVzYXIuUk9UNS5DaXBoZXIoKS5jcnlwdChzdHIpXG5cbnJvdDEzID0gKHN0cikgLT5cbiAgY2Flc2FyLlJPVDEzLkNpcGhlcigpLmNyeXB0KHN0cilcblxucm90MTggPSAoc3RyKSAtPlxuICBjYWVzYXIuUk9UMTguQ2lwaGVyKCkuY3J5cHQoc3RyKVxuXG5yb3Q0NyA9IChzdHIpIC0+XG4gIGNhZXNhci5ST1Q0Ny5DaXBoZXIoKS5jcnlwdChzdHIpXG5cbiMgcmV2ZXJzZSBzdHJpbmdcbnJldiA9IChzdHIpIC0+XG4gIHN0ci5zcGxpdCgnJykucmV2ZXJzZSgpLmpvaW4oJycpXG5cbiMgcmVjaXByb2NhbCBjaXBoZXIgaGVscGVyXG5yZWNpcHJvID0ge1xuICByb3Q1OiByb3Q1LFxuICByb3QxMzogcm90MTMsXG4gIHJvdDE4OiByb3QxOCxcbiAgcm90NDc6IHJvdDQ3LFxuICByZXY6IHJldlxufVxuXG4jIG1kNSBkZWNyeXB0ZXJcbmRlY21kNSA9IChzdHIpIC0+XG4gIGJhc2VVcmwgPSAnaHR0cDovL3d3dy5tZDUtaGFzaC5jb20vbWQ1LWhhc2hpbmctZGVjcnlwdC8nXG4gIHRyeVxuICAgIHJlcyA9IHJlcXVlc3QoJ0dFVCcsIGJhc2VVcmwgKyBzdHIpXG4gIGNhdGNoIGVycm9yXG4gICAgcmV0dXJuIGVycm9yXG4gICQgPSBjaGVlcmlvLmxvYWQgcmVzLmdldEJvZHkoJ3V0ZjgnKVxuICByZXRfc3RyID0gJCgnc3Ryb25nLnJlc3VsdCcpLnRleHQoKVxuICBpZiBzdHIgaXMgZW5jb2RlcihyZXRfc3RyLCdtZDUnKVxuICAgIHJldF9zdHJcbiAgZWxzZVxuICAgICdub3QgZm91bmQnXG5cbiMgZGVjcnlwdGVyIGhlbHBlclxuZGVjcnlwdGVyID0ge1xuICBtZDU6IGRlY21kNVxufVxuXG5cbiMgZW5jb2RlIGhlbHBlclxubW9kdWxlLmV4cG9ydHMuZW5jb2RlciA9IChzdHIsIGFsZ28pIC0+XG4gIHN3aXRjaCBhbGdvXG4gICAgd2hlbiAnaGV4JywgJ2Jhc2U2NCdcbiAgICAgIG5ldyBCdWZmZXIoc3RyKS50b1N0cmluZyhhbGdvKVxuICAgIHdoZW4gJ2FzY2lpODUnXG4gICAgICBiYXNlODUuZW5jb2RlKHN0ciwgJ2FzY2lpODUnKVxuICAgIHdoZW4gJ2Jhc2U5MSdcbiAgICAgIGlmIGhleCA9IGhleF9wYXJzZShzdHIpXG4gICAgICAgIGJhc2U5MS5lbmNvZGUoQnVmZmVyKGhleCwgJ2hleCcpKS50b1N0cmluZygndXRmOCcpXG4gICAgd2hlbiAnYXNjaWknXG4gICAgICBpZiBoZXggPSBoZXhfcGFyc2Uoc3RyKVxuICAgICAgICBCdWZmZXIoaGV4LCAnaGV4JykudG9TdHJpbmcoJ3V0ZjgnKVxuICAgIHdoZW4gJ3JvdDUnLCAncm90MTMnLCAncm90MTgnLCAncm90NDcnLCAncmV2J1xuICAgICAgcmVjaXByb1thbGdvXShzdHIpXG4gICAgd2hlbiAnejg1J1xuICAgICAgYmFzZTg1LmVuY29kZShzdHIsICd6ODUnKVxuICAgIHdoZW4gJ3JmYzE5MjQnXG4gICAgICBiYXNlODUuZW5jb2RlKHN0ciwgJ2lwdjYnKVxuICAgIHdoZW4gJ2NyYzEnLCAnY3JjOCcsICdjcmMxNicsICdjcmMyNCcsICdjcmMzMidcbiAgICAgIGNyY1thbGdvXShzdHIpLnRvU3RyaW5nKDE2KVxuICAgIHdoZW4gJ2FkbGVyMzInXG4gICAgICBhZGxlcjMyLnN0cihzdHIpLnRvU3RyaW5nKDE2KVxuICAgIHdoZW4gJ3VybCdcbiAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdHIpXG4gICAgd2hlbiAndW5peHRpbWUnXG4gICAgICBEYXRlLnBhcnNlKHN0cikudG9TdHJpbmcoMTApXG4gICAgZWxzZVxuICAgICAgaWYgYWxnbyBpbiBhbGxlbmNoYXNoZXNcbiAgICAgICAgY3J5cHRvLmNyZWF0ZUhhc2goYWxnbykudXBkYXRlKHN0ciwgJ3V0ZjgnKS5kaWdlc3QoJ2hleCcpXG5cbiMgZGVjb2RlIGhlbHBlclxubW9kdWxlLmV4cG9ydHMuZGVjb2RlciA9IChzdHIsIGFsZ28pIC0+XG4gIHN3aXRjaCBhbGdvXG4gICAgd2hlbiAnaGV4J1xuICAgICAgaWYgbm90IChzdHIubGVuZ3RoICUgMilcbiAgICAgICAgbmV3IEJ1ZmZlcihzdHIsIGFsZ28pLnRvU3RyaW5nKCd1dGY4JylcbiAgICB3aGVuICdiYXNlNjQnXG4gICAgICBuZXcgQnVmZmVyKHN0ciwgYWxnbykudG9TdHJpbmcoJ3V0ZjgnKVxuICAgIHdoZW4gJ2FzY2lpODUnXG4gICAgICBiYXNlODUuZGVjb2RlKHN0ciwgJ2FzY2lpODUnKS50b1N0cmluZygndXRmOCcpXG4gICAgd2hlbiAnYmFzZTkxJ1xuICAgICAgYmFzZTkxLmRlY29kZShzdHIpLnRvU3RyaW5nKCdoZXgnKVxuICAgIHdoZW4gJ2FzY2lpJ1xuICAgICAgbmV3IEJ1ZmZlcihzdHIsIGFsZ28pLnRvU3RyaW5nKCdoZXgnKVxuICAgIHdoZW4gJ3JvdDUnLCAncm90MTMnLCAncm90MTgnLCAncm90NDcnLCAncmV2J1xuICAgICAgcmVjaXByb1thbGdvXShzdHIpXG4gICAgd2hlbiAnejg1J1xuICAgICAgYmFzZTg1LmRlY29kZShzdHIsICd6ODUnKS50b1N0cmluZygndXRmOCcpXG4gICAgd2hlbiAncmZjMTkyNCdcbiAgICAgIGJhc2U4NS5kZWNvZGUoc3RyLCAnaXB2NicpLnRvU3RyaW5nKCd1dGY4JylcbiAgICB3aGVuICd1cmwnXG4gICAgICBkZWNvZGVVUklDb21wb25lbnQoc3RyKVxuICAgIHdoZW4gJ3VuaXh0aW1lJ1xuICAgICAgbmV3IERhdGUocGFyc2VJbnQoc3RyKSkudG9TdHJpbmcoJ3V0ZjgnKVxuICAgIHdoZW4gJ21kNSdcbiAgICAgIGRlY3J5cHRlclthbGdvXShzdHIpXG4gICAgZWxzZVxuICAgICAgcmV0dXJuICdub3QgaW1wbGVtZW50ZWQnXG4iXX0=
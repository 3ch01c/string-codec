'use strict';
var adler32, alldecoder, allenchashes, allencoder, ascii85, base91, caesar, cheerio, crc, crypto, decalgos, dechashes, decmd5, decrypter, encalgos, enchashes, hex_parse, recipro, request, rev, rotX,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

crc = require('crc');

crypto = require('crypto');

ascii85 = require('ascii85');

base91 = require('../lib/base91');

caesar = require('caesar-salad');

adler32 = require('adler-32');

cheerio = require('cheerio');

request = require('sync-request');

allencoder = [];

encalgos = ['hex', 'ascii', 'base64', 'base85', 'z85', 'ascii85', 'base91', 'rot5', 'rot13', 'rot18', 'rot47', 'rev', 'crc1', 'crc8', 'crc16', 'crc24', 'crc32', 'adler32', 'url', 'unixtime', 'lower', 'upper'];

enchashes = ['md4', 'md5', 'sha', 'sha1', 'sha224', 'sha256', 'sha384', 'sha512', 'rmd160', 'whirlpool'];

allenchashes = enchashes.concat(crypto.getHashes());

allenchashes = allenchashes.filter(function(x, i, self) {
  return self.indexOf(x) === i;
});

allencoder = allencoder.concat(encalgos, allenchashes);

alldecoder = [];

decalgos = ['hex', 'ascii', 'base64', 'base85', 'z85', 'ascii85', 'base91', 'rot5', 'rot13', 'rot18', 'rot47', 'rev', 'url', 'unixtime'];

dechashes = ['md5'];

alldecoder = alldecoder.concat(decalgos, dechashes);

hex_parse = function(str) {
  var hex;
  hex = str.replace(/0x|:/g, '');
  if (!(hex.length % 2)) {
    return hex;
  } else {
    return false;
  }
};

rotX = function(algo) {
  return function(str) {
    return caesar[algo].Cipher().crypt(str);
  };
};

rev = function(str) {
  return str.split('').reverse().join('');
};

recipro = {
  rot5: rotX('ROT5'),
  rot13: rotX('ROT13'),
  rot18: rotX('ROT18'),
  rot47: rotX('ROT47'),
  rev: rev
};

decmd5 = function(str) {
  var $, baseUrl, error, res, ret_str;
  baseUrl = 'http://www.md5-hash.com/md5-hashing-decrypt/';
  try {
    res = request('GET', baseUrl + str);
  } catch (_error) {
    error = _error;
    return error;
  }
  $ = cheerio.load(res.getBody('utf8'));
  ret_str = $('strong.result').text();
  if (str === encoder(ret_str, 'md5')) {
    return ret_str;
  } else {
    return 'not found';
  }
};

decrypter = {
  md5: decmd5
};

module.exports.encoder = function(str, algo) {
  var hex;
  switch (algo) {
    case 'hex':
    case 'base64':
      return new Buffer(str).toString(algo);
    case 'ascii85':
      return ascii85.PostScript.encode(str);
    case 'base91':
      if (hex = hex_parse(str)) {
        return base91.encode(Buffer(hex, 'hex')).toString('utf8');
      }
      break;
    case 'ascii':
      if (hex = hex_parse(str)) {
        return Buffer(hex, 'hex').toString('utf8');
      }
      break;
    case 'rot5':
    case 'rot13':
    case 'rot18':
    case 'rot47':
    case 'rev':
      return recipro[algo](str);
    case 'base85':
    case 'z85':
      return ascii85.ZeroMQ.encode(str);
    case 'crc1':
    case 'crc8':
    case 'crc16':
    case 'crc24':
    case 'crc32':
      return crc[algo](str).toString(16);
    case 'adler32':
      return adler32.str(str).toString(16);
    case 'url':
      return encodeURIComponent(str);
    case 'unixtime':
      return Date.parse(str).toString(10);
    case 'lower':
      return str.toLowerCase();
    case 'upper':
      return str.toUpperCase();
    default:
      if (indexOf.call(allenchashes, algo) >= 0) {
        return crypto.createHash(algo).update(str, 'utf8').digest('hex');
      }
  }
};

module.exports.decoder = function(str, algo) {
  switch (algo) {
    case 'hex':
      if (!(str.length % 2)) {
        return new Buffer(str, algo).toString('utf8');
      }
      break;
    case 'base64':
      return new Buffer(str, algo).toString('utf8');
    case 'ascii85':
      return ascii85.decode(str).toString('utf8');
    case 'base91':
      return base91.decode(str).toString('hex');
    case 'ascii':
      return new Buffer(str, algo).toString('hex');
    case 'rot5':
    case 'rot13':
    case 'rot18':
    case 'rot47':
    case 'rev':
      return recipro[algo](str);
    case 'base85':
    case 'z85':
      return ascii85.ZeroMQ.decode(str).toString('utf8');
    case 'url':
      return decodeURIComponent(str);
    case 'unixtime':
      return new Date(parseInt(str)).toString('utf8');
    case 'md5':
      return decrypter[algo](str);
    default:
      return 'not implemented';
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0cmluZy1jb2RlYy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBQSxDQUFBO0FBQUEsSUFBQSxpTUFBQTtFQUFBLG1KQUFBOztBQUFBLEdBRUEsR0FBTSxPQUFBLENBQVEsS0FBUixDQUZOLENBQUE7O0FBQUEsTUFHQSxHQUFTLE9BQUEsQ0FBUSxRQUFSLENBSFQsQ0FBQTs7QUFBQSxPQUlBLEdBQVUsT0FBQSxDQUFRLFNBQVIsQ0FKVixDQUFBOztBQUFBLE1BS0EsR0FBUyxPQUFBLENBQVEsZUFBUixDQUxULENBQUE7O0FBQUEsTUFNQSxHQUFTLE9BQUEsQ0FBUSxjQUFSLENBTlQsQ0FBQTs7QUFBQSxPQU9BLEdBQVUsT0FBQSxDQUFRLFVBQVIsQ0FQVixDQUFBOztBQUFBLE9BUUEsR0FBVSxPQUFBLENBQVEsU0FBUixDQVJWLENBQUE7O0FBQUEsT0FTQSxHQUFVLE9BQUEsQ0FBUSxjQUFSLENBVFYsQ0FBQTs7QUFBQSxVQVdBLEdBQWEsRUFYYixDQUFBOztBQUFBLFFBWUEsR0FBVyxDQUFDLEtBQUQsRUFBUSxPQUFSLEVBQWlCLFFBQWpCLEVBQTJCLFFBQTNCLEVBQXFDLEtBQXJDLEVBQTRDLFNBQTVDLEVBQXVELFFBQXZELEVBQ0MsTUFERCxFQUNTLE9BRFQsRUFDa0IsT0FEbEIsRUFDMkIsT0FEM0IsRUFDb0MsS0FEcEMsRUFDMkMsTUFEM0MsRUFDbUQsTUFEbkQsRUFDMkQsT0FEM0QsRUFFQyxPQUZELEVBRVUsT0FGVixFQUVtQixTQUZuQixFQUU4QixLQUY5QixFQUVxQyxVQUZyQyxFQUVpRCxPQUZqRCxFQUUwRCxPQUYxRCxDQVpYLENBQUE7O0FBQUEsU0FlQSxHQUFZLENBQUMsS0FBRCxFQUFRLEtBQVIsRUFBZSxLQUFmLEVBQXNCLE1BQXRCLEVBQThCLFFBQTlCLEVBQXdDLFFBQXhDLEVBQWtELFFBQWxELEVBQ0MsUUFERCxFQUNXLFFBRFgsRUFDcUIsV0FEckIsQ0FmWixDQUFBOztBQUFBLFlBaUJBLEdBQWUsU0FB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LFFBUlA7YUFTSSxNQUFNLENBQUMsTUFBUCxDQUFjLEdBQWQsQ0FBa0IsQ0FBQyxRQUFuQixDQUE0QixLQUE1QixFQVRKO0FBQUEsU0FVTyxPQVZQO2FBV1EsSUFBQSxNQUFBLENBQU8sR0FBUCxFQUFZLElBQVosQ0FBaUIsQ0FBQyxRQUFsQixDQUEyQixLQUEzQixFQVhSO0FBQUEsU0FZTyxNQVpQO0FBQUEsU0FZZSxPQVpmO0FBQUEsU0FZd0IsT0FaeEI7QUFBQSxTQVlpQyxPQVpqQztBQUFBLFNBWTBDLEtBWjFDO2FBYUksT0FBUSxDQUFBLElBQUEsQ0FBUixDQUFjLEdBQWQsRUFiSjtBQUFBLFNBY08sUUFkUDtBQUFBLFNBY2lCLEtBZGpCO2FBZUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFmLENBQXNCLEdBQXRCLENBQTBCLENBQUMsUUFBM0IsQ0FBb0MsTUFBcEMsRUFmSjtBQUFBLFNBZ0JPLEtBaEJQO2FBaUJJLGtCQUFBLENBQW1CLEdBQW5CLEVBakJKO0FBQUEsU0FrQk8sVUFsQlA7YUFtQlEsSUFBQSxJQUFBLENBQUssUUFBQSxDQUFTLEdBQVQsQ0FBTCxDQUFtQixDQUFDLFFBQXBCLENBQTZCLE1BQTdCLEVBbkJSO0FBQUEsU0FvQk8sS0FwQlA7YUFxQkksU0FBVSxDQUFBLElBQUEsQ0FBVixDQUFnQixHQUFoQixFQXJCSjtBQUFBO0FBdUJJLGFBQU8saUJBQVAsQ0F2Qko7QUFBQSxHQUR1QjtBQUFBLENBNUd6QixDQUFBIiwiZmlsZSI6InN0cmluZy1jb2RlYy5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0J1xuXG5jcmMgPSByZXF1aXJlICdjcmMnXG5jcnlwdG8gPSByZXF1aXJlICdjcnlwdG8nXG5hc2NpaTg1ID0gcmVxdWlyZSAnYXNjaWk4NSdcbmJhc2U5MSA9IHJlcXVpcmUgJy4uL2xpYi9iYXNlOTEnXG5jYWVzYXIgPSByZXF1aXJlICdjYWVzYXItc2FsYWQnXG5hZGxlcjMyID0gcmVxdWlyZSAnYWRsZXItMzInXG5jaGVlcmlvID0gcmVxdWlyZSAnY2hlZXJpbydcbnJlcXVlc3QgPSByZXF1aXJlICdzeW5jLXJlcXVlc3QnXG5cbmFsbGVuY29kZXIgPSBbXVxuZW5jYWxnb3MgPSBbJ2hleCcsICdhc2NpaScsICdiYXNlNjQnLCAnYmFzZTg1JywgJ3o4NScsICdhc2NpaTg1JywgJ2Jhc2U5MScsXG4gICAgICAgICAgICAncm90NScsICdyb3QxMycsICdyb3QxOCcsICdyb3Q0NycsICdyZXYnLCAnY3JjMScsICdjcmM4JywgJ2NyYzE2JyxcbiAgICAgICAgICAgICdjcmMyNCcsICdjcmMzMicsICdhZGxlcjMyJywgJ3VybCcsICd1bml4dGltZScsICdsb3dlcicsICd1cHBlciddXG5lbmNoYXNoZXMgPSBbJ21kNCcsICdtZDUnLCAnc2hhJywgJ3NoYTEnLCAnc2hhMjI0JywgJ3NoYTI1NicsICdzaGEzODQnLFxuICAgICAgICAgICAgICdzaGE1MTInLCAncm1kMTYwJywgJ3doaXJscG9vbCddXG5hbGxlbmNoYXNoZXMgPSBlbmNoYXNoZXMuY29uY2F0KGNyeXB0by5nZXRIYXNoZXMoKSlcbiMgZGVkdXBlXG5hbGxlbmNoYXNoZXMgPSBhbGxlbmNoYXNoZXMuZmlsdGVyKCh4LCBpLCBzZWxmKSAtPiBzZWxmLmluZGV4T2YoeCkgaXMgaSlcbmFsbGVuY29kZXIgPSBhbGxlbmNvZGVyLmNvbmNhdChlbmNhbGdvcyxhbGxlbmNoYXNoZXMpXG5cbmFsbGRlY29kZXIgPSBbXVxuZGVjYWxnb3MgPSBbJ2hleCcsICdhc2NpaScsICdiYXNlNjQnLCAnYmFzZTg1JywgJ3o4NScsICdhc2NpaTg1JywgJ2Jhc2U5MScsXG4gICAgICAgICAgICAncm90NScsICdyb3QxMycsICdyb3QxOCcsICdyb3Q0NycsICdyZXYnLCAndXJsJywgJ3VuaXh0aW1lJ11cbmRlY2hhc2hlcyA9IFsnbWQ1J11cbmFsbGRlY29kZXIgPSBhbGxkZWNvZGVyLmNvbmNhdChkZWNhbGdvcyxkZWNoYXNoZXMpXG5cbiMgaGV4IHBhcnNlIGhlbHBlclxuaGV4X3BhcnNlID0gKHN0cikgLT5cbiAgaGV4ID0gc3RyLnJlcGxhY2UoLzB4fDovZywgJycpXG4gIGlmIG5vdCAoaGV4Lmxlbmd0aCAlIDIpXG4gICAgaGV4XG4gIGVsc2VcbiAgICBmYWxzZVxuXG4jIHJvdCBoZWxwZXJcbnJvdFggPSAoYWxnbykgLT5cbiAgKHN0cikgLT5cbiAgICBjYWVzYXJbYWxnb10uQ2lwaGVyKCkuY3J5cHQoc3RyKVxuXG4jIHJldmVyc2Ugc3RyaW5nXG5yZXYgPSAoc3RyKSAtPlxuICBzdHIuc3BsaXQoJycpLnJldmVyc2UoKS5qb2luKCcnKVxuXG4jIHJlY2lwcm9jYWwgY2lwaGVyIGhlbHBlclxucmVjaXBybyA9IHtcbiAgcm90NTogcm90WCgnUk9UNScpLFxuICByb3QxMzogcm90WCgnUk9UMTMnKSxcbiAgcm90MTg6IHJvdFgoJ1JPVDE4JyksXG4gIHJvdDQ3OiByb3RYKCdST1Q0NycpLFxuICByZXY6IHJldlxufVxuXG4jIG1kNSBkZWNyeXB0ZXJcbmRlY21kNSA9IChzdHIpIC0+XG4gIGJhc2VVcmwgPSAnaHR0cDovL3d3dy5tZDUtaGFzaC5jb20vbWQ1LWhhc2hpbmctZGVjcnlwdC8nXG4gIHRyeVxuICAgIHJlcyA9IHJlcXVlc3QoJ0dFVCcsIGJhc2VVcmwgKyBzdHIpXG4gIGNhdGNoIGVycm9yXG4gICAgcmV0dXJuIGVycm9yXG4gICQgPSBjaGVlcmlvLmxvYWQgcmVzLmdldEJvZHkoJ3V0ZjgnKVxuICByZXRfc3RyID0gJCgnc3Ryb25nLnJlc3VsdCcpLnRleHQoKVxuICBpZiBzdHIgaXMgZW5jb2RlcihyZXRfc3RyLCdtZDUnKVxuICAgIHJldF9zdHJcbiAgZWxzZVxuICAgICdub3QgZm91bmQnXG5cbiMgZGVjcnlwdGVyIGhlbHBlclxuZGVjcnlwdGVyID0ge1xuICBtZDU6IGRlY21kNVxufVxuXG5cbiMgZW5jb2RlIGhlbHBlclxubW9kdWxlLmV4cG9ydHMuZW5jb2RlciA9IChzdHIsIGFsZ28pIC0+XG4gIHN3aXRjaCBhbGdvXG4gICAgd2hlbiAnaGV4JywgJ2Jhc2U2NCdcbiAgICAgIG5ldyBCdWZmZXIoc3RyKS50b1N0cmluZyhhbGdvKVxuICAgIHdoZW4gJ2FzY2lpODUnXG4gICAgICBhc2NpaTg1LlBvc3RTY3JpcHQuZW5jb2RlKHN0cilcbiAgICB3aGVuICdiYXNlOTEnXG4gICAgICBpZiBoZXggPSBoZXhfcGFyc2Uoc3RyKVxuICAgICAgICBiYXNlOTEuZW5jb2RlKEJ1ZmZlcihoZXgsICdoZXgnKSkudG9TdHJpbmcoJ3V0ZjgnKVxuICAgIHdoZW4gJ2FzY2lpJ1xuICAgICAgaWYgaGV4ID0gaGV4X3BhcnNlKHN0cilcbiAgICAgICAgQnVmZmVyKGhleCwgJ2hleCcpLnRvU3RyaW5nKCd1dGY4JylcbiAgICB3aGVuICdyb3Q1JywgJ3JvdDEzJywgJ3JvdDE4JywgJ3JvdDQ3JywgJ3JldidcbiAgICAgIHJlY2lwcm9bYWxnb10oc3RyKVxuICAgIHdoZW4gJ2Jhc2U4NScsICd6ODUnXG4gICAgICBhc2NpaTg1Llplcm9NUS5lbmNvZGUoc3RyKVxuICAgIHdoZW4gJ2NyYzEnLCAnY3JjOCcsICdjcmMxNicsICdjcmMyNCcsICdjcmMzMidcbiAgICAgIGNyY1thbGdvXShzdHIpLnRvU3RyaW5nKDE2KVxuICAgIHdoZW4gJ2FkbGVyMzInXG4gICAgICBhZGxlcjMyLnN0cihzdHIpLnRvU3RyaW5nKDE2KVxuICAgIHdoZW4gJ3VybCdcbiAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdHIpXG4gICAgd2hlbiAndW5peHRpbWUnXG4gICAgICBEYXRlLnBhcnNlKHN0cikudG9TdHJpbmcoMTApXG4gICAgd2hlbiAnbG93ZXInXG4gICAgICBzdHIudG9Mb3dlckNhc2UoKVxuICAgIHdoZW4gJ3VwcGVyJ1xuICAgICAgc3RyLnRvVXBwZXJDYXNlKClcbiAgICBlbHNlXG4gICAgICBpZiBhbGdvIGluIGFsbGVuY2hhc2hlc1xuICAgICAgICBjcnlwdG8uY3JlYXRlSGFzaChhbGdvKS51cGRhdGUoc3RyLCAndXRmOCcpLmRpZ2VzdCgnaGV4JylcblxuIyBkZWNvZGUgaGVscGVyXG5tb2R1bGUuZXhwb3J0cy5kZWNvZGVyID0gKHN0ciwgYWxnbykgLT5cbiAgc3dpdGNoIGFsZ29cbiAgICB3aGVuICdoZXgnXG4gICAgICBpZiBub3QgKHN0ci5sZW5ndGggJSAyKVxuICAgICAgICBuZXcgQnVmZmVyKHN0ciwgYWxnbykudG9TdHJpbmcoJ3V0ZjgnKVxuICAgIHdoZW4gJ2Jhc2U2NCdcbiAgICAgIG5ldyBCdWZmZXIoc3RyLCBhbGdvKS50b1N0cmluZygndXRmOCcpXG4gICAgd2hlbiAnYXNjaWk4NSdcbiAgICAgIGFzY2lpODUuZGVjb2RlKHN0cikudG9TdHJpbmcoJ3V0ZjgnKVxuICAgIHdoZW4gJ2Jhc2U5MSdcbiAgICAgIGJhc2U5MS5kZWNvZGUoc3RyKS50b1N0cmluZygnaGV4JylcbiAgICB3aGVuICdhc2NpaSdcbiAgICAgIG5ldyBCdWZmZXIoc3RyLCBhbGdvKS50b1N0cmluZygnaGV4JylcbiAgICB3aGVuICdyb3Q1JywgJ3JvdDEzJywgJ3JvdDE4JywgJ3JvdDQ3JywgJ3JldidcbiAgICAgIHJlY2lwcm9bYWxnb10oc3RyKVxuICAgIHdoZW4gJ2Jhc2U4NScsICd6ODUnXG4gICAgICBhc2NpaTg1Llplcm9NUS5kZWNvZGUoc3RyKS50b1N0cmluZygndXRmOCcpXG4gICAgd2hlbiAndXJsJ1xuICAgICAgZGVjb2RlVVJJQ29tcG9uZW50KHN0cilcbiAgICB3aGVuICd1bml4dGltZSdcbiAgICAgIG5ldyBEYXRlKHBhcnNlSW50KHN0cikpLnRvU3RyaW5nKCd1dGY4JylcbiAgICB3aGVuICdtZDUnXG4gICAgICBkZWNyeXB0ZXJbYWxnb10oc3RyKVxuICAgIGVsc2VcbiAgICAgIHJldHVybiAnbm90IGltcGxlbWVudGVkJ1xuIl19